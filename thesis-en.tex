%
% Niniejszy plik stanowi przykład formatowania pracy magisterskiej na
% Wydziale MIM UW.  Szkielet użytych poleceń można wykorzystywać do
% woli, np. formatujac wlasna prace.
%
% Zawartosc merytoryczna stanowi oryginalnosiagniecie
% naukowosciowe Marcina Wolinskiego.  Wszelkie prawa zastrzeżone.
%
% Copyright (c) 2001 by Marcin Woliński <M.Wolinski@gust.org.pl>
% Poprawki spowodowane zmianami przepisów - Marcin Szczuka, 1.10.2004
% Poprawki spowodowane zmianami przepisow i ujednolicenie
% - Seweryn Karłowicz, 05.05.2006
% Dodanie wielu autorów i tłumaczenia na angielski - Kuba Pochrybniak, 29.11.2016

% dodaj opcję [licencjacka] dla pracy licencjackiej
% dodaj opcję [en] dla wersji angielskiej (mogą być obie: [licencjacka,en])
\documentclass[licencjacka,en]{pracamgr}

% Dane magistranta:
% \autor{Imię Nazwisko}{231040}

% Dane magistrantów:
\autor{Tomasz Nowak}{429575}
\autori{Michał Staniewski}{429598}
\autorii{Mieszko Grodzicki}{429132}
\autoriii{Bartosz Smolarczyk}{429594}
%\autoriv{Autor nr Cztery}{432145}
%\autorv{Autor nr Pięć}{342011}

\title{Accelerating package expansion in Rust through development of a semantic versioning tool}
\titlepl{Tytuł po polsku}

%\tytulang{An implementation of a difference blabalizer based on the theory of $\sigma$ -- $\rho$ phetors}

%kierunek:
% - matematyka, informacyka, ...
% - Mathematics, Computer Science, ...
\kierunek{Computer Science}

% informatyka - nie okreslamy zakresu (opcja zakomentowana)
% matematyka - zakres moze pozostac nieokreslony,
% a jesli ma byc okreslony dla pracy mgr,
% to przyjmuje jedna z wartosci:
% {metod matematycznych w finansach}
% {metod matematycznych w ubezpieczeniach}
% {matematyki stosowanej}
% {nauczania matematyki}
% Dla pracy licencjackiej mamy natomiast
% mozliwosc wpisania takiej wartosci zakresu:
% {Jednoczesnych Studiow Ekonomiczno--Matematycznych}

% \zakres{Tu wpisac, jesli trzeba, jedna z opcji podanych wyzej}

% Praca wykonana pod kierunkiem:
% (podać tytuł/stopień imię i nazwisko opiekuna
% Instytut
% ew. Wydział ew. Uczelnia (jeżeli nie MIM UW))
\opiekun{mgr Michał Możdżonek\\
  Institute of Computer Science\\
  }

% miesiąc i~rok:
\date{May 2023}

%Podać dziedzinę wg klasyfikacji Socrates-Erasmus:
\dziedzina{
%11.0 Matematyka, Informatyka:\\
%11.1 Matematyka\\
%11.2 Statystyka\\
11.3 Computer Science\\
%11.4 Sztuczna inteligencja\\
%11.5 Nauki aktuarialne\\
%11.9 Inne nauki matematyczne i informatyczne
}

%Klasyfikacja tematyczna wedlug AMS (matematyka) lub ACM (informatyka)
\klasyfikacja{D. Software\\
  D.127. Blabalgorithms\\
  D.127.6. Numerical blabalysis}

% Słowa kluczowe:
\keywords{Rust, semantic versioning, continuous integration, cargo}

% Tu jest dobre miejsce na Twoje własne makra i~środowiska:
\newtheorem{defi}{Definicja}[section]

% koniec definicji

\begin{document}
\maketitle

%tu idzie streszczenie na strone poczatkowa
\begin{abstract}
In many programming languages there exist countless nuances,
making developers accidentally release new versions of their packages
that are not backwards-compatible.
Such releases can directly impact projects which are using their packages,
causing bugs or even compilation errors when using the latest version.
One of the affected languages is Rust,
which also lacks (itself) a built-in mechanism for enforcing semantic versioning.

The aim of this thesis is to describe the development of a tool
for Rust programmers to reduce the chances of publishing
a new version of the code that violates semantic versioning.

There are already on-going plans to bundle this tool
into the language's standard development toolchain.
It would make it commonly used and therefore help users to safely get bug fixes,
security patches and new functionality,
without worrying about their app being broken by a dependency change.
\end{abstract}

\tableofcontents
%\listoffigures
%\listoftables



\chapter*{Introduction}
\addcontentsline{toc}{chapter}{Introduction}

Rust is a relatively new language that has lately been gaining on popularity.
Amongst its standard development toolchain there is a software called cargo 
-- Rust's build system and package manager,
which handles building a crate -- a package with Rust code.
Amongst cargo's responsibilities is searching for the newest versions,
downloading and building dependencies
(that is, other libraries / crates that the code uses).

Cargo assumes that all crates follow semantic versioning
-- a set of rules that decide when it is safe to use the new version of a library
without any problems (the projects that depend on this library must still compile).
Thanks to that, developers of libraries can release patches and bugfixes
and cargo by default will automatically use those newest releases.
The exact definition of semantic versioning is explained in chapter \ref{r:definitions}.

It turns out that it is not obvious which changes are backwards-compatible
and which changes are not. There are a lot of examples (listed in \ref{r:semverisdifficult})
where experienced Rust developers made a mistake 
(due to insufficient knowledge about the language or by overlooking something)
that changed the public API of a library in such a way that users' code stopped compiling.

In this thesis we're presenting our work on a tool to detect and notify about
a subset of problems that make Rust libraries' public API non-backwards compatible,
with the goal of making problems with semantic versioning less frequent in the Rust community.
The exact goals of this project are described in chapter \ref{r:vision}.

The project is open-source -- all our work is visible in public repositories
(listed in \ref{r:projectstructure}). The project existed before our contributions,
thus chapter \ref{r:implementation} mainly describes how we've 
been extending the project's functionalities and fixing its issues.
Chapter \ref{r:summary} is a summary of our results and the project's impact 
on the Rust community.



\chapter{Definitions}\label{r:definitions}

\section{Rust language and cargo}

Rust is a language (...)

Cargo is the Rust package manager, which (...)

Cargo requires the packages (called crates) to follow semantic versioning (semver).

The place where cargo (...) is called the registry.
Its web version is available at crates.io.


\section{Semantic versioning (semver)}

Semver is (...)

There are three types of release:
\begin{enumerate}
	\item patch -- (...)
	\item minor -- (...)
	\item major -- (...)
\end{enumerate}

Each release is marked with a number (...)

For example, (...)

By default, cargo uses (...)

Cargo supports yanking releases from the registry.



\chapter{State of the art}\label{r:stateoftheart}

\section{The difficulty of correctly using semver in Rust}\label{r:semverisdifficult}

<Above we explained what semver is, now explain in general what are the common difficulties and problems>

<Why is it easy to break semver?>

<Why people tend to break semver?>

\section{Consequences of breaking semver}

When a library maintainer breaks semver, for (...) reasons, the users' code stops compiling and (...)


\section{Real-life examples of semver breaks}

<Here write about cases our mentor mentioned in his blogs>

<Here also write about cases users reported in the github issue>

<Here mention the paper describing that 43\% of yanked releases
are because of semver breaks and 3.7\% of all >300'000 releases are yanked>

<Here mention that we've developed (currently: we're developing)
a script that will scan all releases for the semver breaks
we can detect and the results are presented in chapter (...)>


\section{Existing tools for detecting semver breaks}

In some languages <list here examples>, it is easy to check for semver breaks.

In Rust there are three existing tools for (...)
\begin{itemize}
	\item cargo-breaking -- <here explain a bit how it works and why it is no longer maintained>
	\item rust-semverver -- <here explain a bit how it works and why it is no longer maintained>
	\item cargo-semver-checks -- <here explain a bit how it works and that it is maintained (e.g. by us) and it is our project>
\end{itemize}

In other popular languages, there haven't been as much progress, because (...)



\chapter{Vision}\label{r:vision}

\section{Project purpose}

Cargo-semver-checks is designed to (...)

The goal is to (...)


\section{Project usage}

The main usages of the tool are:
\begin{itemize}
	\item running locally from the command-line before publishing, (...)
	\item running in CI (e.g. GitHub Actions) to check PRs, (...)
\end{itemize}

<Here describe the vision on how the tool should be automatically run in CI
and how that will benefit the Rust developers>

\subsection{Running in CI}

<Here describe the vision on how the tool should be automatically run in CI
and how that will benefit the Rust developers>

\subsection{On-going plans to merge the tool into cargo}

<Here describe the existing plans to merge the project in which we're contributing
to the official Rust toolchain and how that will benefit the Rust developers>


\section{Project baseline}

Before our contributions, the project was in a (...) state
with (...) issues.



\chapter{Theory}\label{r:theory}

\section{Project structure}\label{r:projectstructure}

The tool heavily uses the rustdocs, (...).
It parses its JSON through Trustfall (...).

The project consists of three sub-projects:
\begin{enumerate}
	\item cargo-semver-checks -- a CLI tool to run lints that are Trustfall queries, (...)
	\item trustfall-rustdoc -- allows running Trustfall queries over rustdoc in a version-agnostic manner, (...)
	\item trustfall-rustdoc-adapter -- implements the Trustfall interface for one specific rustdoc version, (...)
\end{enumerate}

<Possibly insert that diagram here?>


\section{cargo-semver-checks}

<Here describe the inner-workings of the CLI tool>


\section{trustfall-rustdoc-adapter}

<Here describe the inner-workings of the adapters>



\chapter{Implementation}\label{r:implementation}

\section{New lints}

<Here write a list about the new lints we've written>


\section{Test suite}

<Here write a list about the improvements in the testing suite>


\section{CLI usage}

<Here write a list about changes that made the CLI better>


\section{Bugfixes}

<Here write a list about found and fixed bugs>


\section{CI improvements}

<Here write a list about the V2 of the CI>


\section{Script}

<Here write about the script that searches all existing releases for detected semver breaks>


\section{Healthier codebase}

<Here write a list of changes that made the codebase better>



\chapter{Team}\label{r:team}

\section{Used methodology}

<Here describe how we've been developing the tool>


\section{Responsibilities}

<Here describe who did what>



\chapter{Summary}\label{r:summary}

\section{Steady progress in tool's popularity}

<Here show how the number of downloads has changed>

<Here show how the number of stars on GitHub has changed>

<Here describe how our work might have impacted those results>

<Here show the comments of users on GitHub.
As one of the examples, give the maintainer of a big
library that created an issue ,,Make CI runs faster''
and after learning about one of our PRs to make the CI faster,
he was so excited that he wrote a comment with a tip in our PR>

<Here list the maintainers of big libraries that started using the tool during our development>


\section{Script}

<Here show the results of the script that searches all existing releases for detected semver breaks>

(to consider: maybe move it to an appendix?)

<Here describe how our new lints can make an impact on the community based on the found semver breaks from the script>


\section{Future-proofing}

<Here describe other overall changes that prepares the tool to be more successful in the future>



\appendix

\begin{thebibliography}{99}\label{r:bibliography}
\addcontentsline{toc}{chapter}{Bibliography}

\bibitem[Bea65]{beaman} Juliusz Beaman, \textit{Morbidity of the Jolly
    function}, Mathematica Absurdica, 117 (1965) 338--9.

\bibitem[Blar16]{eb1} Elizjusz Blarbarucki, \textit{O pewnych
    aspektach pewnych aspektów}, Astrolog Polski, Zeszyt 16, Warszawa
  1916.

\bibitem[Fif00]{ffgg} Filigran Fifak, Gizbert Gryzogrzechotalski,
  \textit{O blabalii fetorycznej}, Materiały Konferencji Euroblabal
  2000.

\bibitem[Fif01]{ff-sr} Filigran Fifak, \textit{O fetorach
    $\sigma$-$\rho$}, Acta Fetorica, 2001.

\bibitem[Głomb04]{grglo} Gryzybór Głombaski, \textit{Parazytonikacja
    blabiczna fetorów --- nowa teoria wszystkiego}, Warszawa 1904.

\bibitem[Hopp96]{hopp} Claude Hopper, \textit{On some $\Pi$-hedral
    surfaces in quasi-quasi space}, Omnius University Press, 1996.

\bibitem[Leuk00]{leuk} Lechoslav Leukocyt, \textit{Oval mappings ab ovo},
  Materiały Białostockiej Konferencji Hodowców Drobiu, 2000.

\bibitem[Rozk93]{JR} Josip A.~Rozkosza, \textit{O pewnych własnościach
    pewnych funkcji}, Północnopomorski Dziennik Matematyczny 63491
  (1993).

\bibitem[Spy59]{spyrpt} Mrowclaw Spyrpt, \textit{A matrix is a matrix
    is a matrix}, Mat. Zburp., 91 (1959) 28--35.

\bibitem[Sri64]{srinis} Rajagopalachari Sriniswamiramanathan,
  \textit{Some expansions on the Flausgloten Theorem on locally
    congested lutches}, J. Math.  Soc., North Bombay, 13 (1964) 72--6.

\bibitem[Whi25]{russell} Alfred N. Whitehead, Bertrand Russell,
  \textit{Principia Mathematica}, Cambridge University Press, 1925.

\bibitem[Zen69]{heu} Zenon Zenon, \textit{Użyteczne heurystyki
    w~blabalizie}, Młody Technik, nr~11, 1969.

\end{thebibliography}



\chapter*{Attachments}\label{r:attachments}
\addcontentsline{toc}{chapter}{Attachments}

\section*{Source code structure}

<Here describe the project structure of the included CD>


\section*{Tests}

<Here describe the tests (and possibly how to run them) of the included CD>

\end{document}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% coding: latin-2
%%% End:
